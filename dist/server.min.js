"use strict";var express=require("express"),mongoose=require("mongoose"),cors=require("cors"),_require=require("socket.io"),Server=_require.Server,http=require("http"),path=require("path"),fs=require("fs"),multer=require("multer"),PDFDocument=require("pdfkit");require("dotenv").config();var app=express(),PORT=process.env.PORT||3e3;app.use(cors()),app.use(express.json({limit:"50mb"})),app.use(express.urlencoded({extended:!0,limit:"50mb"})),app.use(express.text({type:"text/plain"}));var MONGO_URI=process.env.MONGO_URI||"tu_mongo_uri_aqui";mongoose.connect(MONGO_URI,{useNewUrlParser:!0,useUnifiedTopology:!0}).then(function(){return console.log("MongoDB conectado")}).catch(function(e){return console.error("Error al conectar MongoDB:",e)});var storage=multer.diskStorage({destination:function(e,r,o){var n=path.join(__dirname,"uploads");fs.existsSync(n)||fs.mkdirSync(n),o(null,n)},filename:function(e,r,o){o(null,Date.now()+"-"+Math.round(1e9*Math.random())+path.extname(r.originalname))}}),upload=multer({storage:storage});app.get("/",function(e,r){r.send("Backend funcionando correctamente")}),app.post("/login",function(r,o){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:try{n=r.body,n.email,n.password,o.json({msg:"Login simulado"})}catch(e){console.error(e),o.status(500).json({error:"Error en login"})}case 1:case"end":return e.stop()}})}),app.get("/productos",function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:try{r.json({msg:"Productos simulados"})}catch(e){console.error(e),r.status(500).json({error:"Error al obtener productos"})}case 1:case"end":return e.stop()}})}),app.post("/banner",upload.single("image"),function(e,r){try{if(!e.file)return r.status(400).json({msg:"No se subió la imagen"});r.json({msg:"Imagen subida",file:e.file.filename})}catch(e){console.error(e),r.status(500).json({error:"Error al subir banner"})}}),app.post("/favoritos",function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:try{r.json({msg:"Favorito agregado simuladamente"})}catch(e){console.error(e),r.status(500).json({error:"Error en favoritos"})}case 1:case"end":return e.stop()}})}),app.post("/cotizaciones",function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:try{r.json({msg:"Cotización registrada simuladamente"})}catch(e){console.error(e),r.status(500).json({error:"Error en cotizaciones"})}case 1:case"end":return e.stop()}})}),app.get("/pdf",function(e,r){try{var o=new PDFDocument;r.setHeader("Content-Type","application/pdf"),o.text("PDF generado correctamente"),o.pipe(r),o.end()}catch(e){console.error(e),r.status(500).json({error:"Error al generar PDF"})}});var server=http.createServer(app),io=new Server(server,{cors:{origin:"*"}});io.on("connection",function(e){console.log("Cliente conectado",e.id),e.on("disconnect",function(){return console.log("Cliente desconectado",e.id)})}),server.listen(PORT,function(){console.log("Servidor corriendo en http://localhost:".concat(PORT))});
//# sourceMappingURL=server.min.js.map
